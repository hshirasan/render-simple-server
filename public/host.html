<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host Panel</title>
</head>
<body>
    <h1>Host Panel</h1>

    <!-- 色選択 -->
    <fieldset>
        <legend>Select Color:</legend>
        <label><input type="radio" name="color" value="red"> Red</label>
        <label><input type="radio" name="color" value="yellow"> Yellow</label>
        <label><input type="radio" name="color" value="pink"> Pink</label>
        <label><input type="radio" name="color" value="green"> Green</label>
        <label><input type="radio" name="color" value="purple"> Purple</label>
        <label><input type="radio" name="color" value="white"> White</label>
        <label><input type="radio" name="color" value="cyan"> Cyan</label>
        <label><input type="radio" name="color" value="blue"> Blue</label>
    </fieldset>

    <!-- 点滅パターン選択 -->
    <fieldset>
        <legend>Select Blink Pattern:</legend>
        <label><input type="radio" name="blink" value="always"> Always On</label>
        <label><input type="radio" name="blink" value="blink-100-400"> 100ms On / 400ms Off</label>
        <label><input type="radio" name="blink" value="blink-500-500"> 500ms On / 500ms Off</label>
        <label><input type="radio" name="blink" value="fade"> 500ms Fade In / 500ms Fade Out</label>
    </fieldset>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        const updateSettings = () => {
            const color = document.querySelector('input[name="color"]:checked')?.value;
            const blinkPattern = document.querySelector('input[name="blink"]:checked')?.value;

            if (color && blinkPattern) {
                const settings = { color, blinkPattern, timestamp: Date.now() };
                socket.emit('update-settings', settings);
                console.log('Settings sent:', settings);
            }
        };

        // ラジオボタンにイベントリスナーを追加
        document.querySelectorAll('input[name="color"]').forEach((radio) =>
            radio.addEventListener('change', updateSettings)
        );
        document.querySelectorAll('input[name="blink"]').forEach((radio) =>
            radio.addEventListener('change', updateSettings)
        );
    </script>
</body>
</html>

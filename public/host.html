<!-- Filename: host_panel_with_sequences.html -->
<!-- Revision: 4 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host Panel with Sequences</title>
    <style>
        fieldset {
            margin-bottom: 20px;
        }
        .sequence-control label {
            display: block;
            margin-bottom: 10px;
        }
        .sequence-comment {
            display: block;
            margin-top: 5px;
            width: 100%;
        }
    </style>
</head>
<body>
    <h1>Host Panel with Manual Control</h1>

    <!-- 色とパターン設定 -->
    <fieldset>
        <legend>Color and Pattern Settings</legend>
        <div>
            <strong>Color Settings:</strong>
            <label><input type="radio" name="color" value="red"> Red</label>
            <label><input type="radio" name="color" value="yellow"> Yellow</label>
            <label><input type="radio" name="color" value="green"> Green</label>
            <label><input type="radio" name="color" value="pink"> Pink</label>
            <label><input type="radio" name="color" value="purple"> Purple</label>
            <label><input type="radio" name="color" value="cyan"> Cyan</label>
            <label><input type="radio" name="color" value="white"> White</label>
            <label><input type="radio" name="color" value="black"> Black</label>
        </div>
        <div>
            <strong>Pattern Settings:</strong>
            <label><input type="radio" name="blink" value="blink-250-250"> 250ms On / 250ms Off</label>
            <label><input type="radio" name="blink" value="blink-500-500"> 500ms On / 500ms Off</label>
            <label><input type="radio" name="blink" value="fade"> Fade In / Fade Out</label>
            <label><input type="radio" name="blink" value="always"> Always On</label>
            <label><input type="radio" name="blink" value="single-fade-blink"> Single Fade Blink</label>
        </div>
        <button id="sendSettings">Send Settings</button>
    </fieldset>

    <!-- シーケンスラジオボタン -->
    <fieldset class="sequence-control">
        <legend>Manual Sequence Control</legend>
        <!-- 曲1～曲3、各シーン1～10 -->
        <script>
            for (let song = 1; song <= 3; song++) {
                for (let scene = 1; scene <= 10; scene++) {
                    document.write(`
                        <label>
                            <input type="radio" name="manual-sequence" value="sequence-${song}-${scene}">
                            曲${song}・シーン${scene}
                            <select id="color-${song}-${scene}">
                                <option value="red">Red</option>
                                <option value="yellow">Yellow</option>
                                <option value="green">Green</option>
                                <option value="pink">Pink</option>
                                <option value="purple">Purple</option>
                                <option value="cyan">Cyan</option>
                                <option value="white">White</option>
                                <option value="black">Black</option>
                            </select>
                            <select id="pattern-${song}-${scene}">
                                <option value="blink-250-250">250ms On / 250ms Off</option>
                                <option value="blink-500-500">500ms On / 500ms Off</option>
                                <option value="fade">Fade In / Fade Out</option>
                                <option value="always">Always On</option>
                                <option value="single-fade-blink">Single Fade Blink</option>
                            </select>
                            <input type="text" id="comment-${song}-${scene}" class="sequence-comment" placeholder="シーンの説明を入力...">
                        </label>
                    `);
                }
            }
        </script>
    </fieldset>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        // シーケンス送信機能
        document.querySelectorAll('input[name="manual-sequence"]').forEach((radio) => {
            radio.addEventListener('change', () => {
                const [_, song, scene] = radio.value.split('-');
                const color = document.getElementById(`color-${song}-${scene}`).value;
                const pattern = document.getElementById(`pattern-${song}-${scene}`).value;
                const comment = document.getElementById(`comment-${song}-${scene}`).value;

                console.log(`Sending settings for Song ${song}, Scene ${scene}: Color=${color}, Pattern=${pattern}, Comment=${comment}`);

                // サーバーに設定を送信
                socket.emit('update-settings', { color, blinkPattern: pattern, comment });
            });
        });

        // 元々の送信機能
        document.getElementById('sendSettings').addEventListener('click', () => {
            const color = document.querySelector('input[name="color"]:checked')?.value;
            const blinkPattern = document.querySelector('input[name="blink"]:checked')?.value;

            if (!color || !blinkPattern) {
                alert('Please select both color and blink pattern.');
                return;
            }

            console.log(`Sending settings: Color=${color}, Pattern=${blinkPattern}`);
            socket.emit('update-settings', { color, blinkPattern });
        });
    </script>
</body>
</html>
